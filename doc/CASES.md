# Основные сценарии

[Роли см тут](README.md#Роли-пользователей-системы)

## Загрузить размеченный фото архив
Как Исследователь, я хочу добавить в систему сформированные и предварительно просмотренные фотографии с 
разметкой.

[Технические детали](README.md#Техпроцесс-пакетной-загрузки-сырых-фото-фактов)

Выбираем файл, загружаем его в систему. 
Система:

1. Cохраняет импортируемый файл в файловом хранилище
2. Создает задачу **Запрос на вливание** в БД,
3. Парсит импортируемый файл
4. Сохраняет файлы-разметки и фото в файловом хранилище
5. Сохраняет в граф - узлы, отражающие фото, игроков и их связи со специальной пометкой - **Сырые данные**
6. Узлы графа должны сохранить информацию о связанном запросе на вливание
 
### Редактировать запрос на вливание
Как Исследователь, я хочу изменить Игроков запроса на вливание, потому что фото были неверно распознаны, либо 
неверно привязаны к существующего Игроку в базе.

1. Исследователь открывает список своих запросов на вливание, сортирует по дате, выбирает по статусу "Новый".
2. Исследователь выбирает запрос на редактирование.
3. В открытом запросе на вливание отображаются:
   1. Фотографии, лица распознанных людей (Игроков) выделены прямоугольниками и подписаны.
   2. Список Игроков для каждой фотографии.
4. Далее, Исследователь может сделать следующие действия:
   1. Исследователь выбирает Игрока из списка и заменяет его на уже существующего в системе либо создает нового.
   2. Исследователь убирает Игрока.
   3. Исследователь добавляет существующего в системе либо создает нового Игрока, с указанием его на фото.
   4. Исследователь изменяет положение выделяющего прямоугольника для указанного Игрока.

### Утвердить запрос на вливание
Как Согласующий я хочу утвердить/откатить/заморозить/откоментировать запрос на вливание. 
Для проверки согласованности данных, я должен иметь возможность посмотреть импортируемые данные, 
проверить импортируемые узлы и связи графа в связях с остальным графом.

* В результате утверждения пометка **Сырые данные** снимается.
* В результате отката импортируемые узлы и связи удаляются из графа. Фото, архив и разметка удаляются из хранилища.
* В результате заморозки узлы и связи удаляются из графа, но все данные остаются в хранилище. 
* В результате комментария - к запросу на вливание добавляется комментарий, который может увидеть Исследователь.

### Просмотр своих/чужих запросов на вливание
Как Исследователь, я хочу проверить статус своего запроса на вливание.

## Поиск по графу

### Найти Игрока по имени

### Установить связь между двумя Игроками
Как Исследователь, я хочу установить связь между двумя Игроками, для определения их потенциального взаимодествия. 

1. Исследователь ищет и выбирает Игроков по ФИО, атрибутам, либо двигаясь по связям графа.
2. Исследователь выбирает набор типов связей.
3. Для типа связи ГЕО выбирается допустимый радиус (в метрах, километрах)
4. Для типа связи ВРЕМЯ - допустимый диапазон времени (дни, часы, минуты)
5. Исследователь запускает поиск и идет курить.
6. Система выводит кратчайший путь от Игрока 1 к Игроку 2 с учетом ограничений.

### Установление круга знакомств Игрока
 
### Отобразить связи Игрока 
На глубину N

По типам связей

По типам связных узлов

По расстоянию

По времени




