# Описание метаданных - типов вершин и ребер графа и их свойств

Описание это пока сильно сказано, просто привожу здесь список, чтоб не забыть.

## Вершины

Базовые типы сущностей, и их иерархия:

![](C:\work\geograph\doc\entity-graph.png "Типы вершин графа")


### Ent (Entity)
Любая сущность, базовый тип для всех других. 

Атрибуты:
* uid - GUID - индексирован
* rq - номер запроса на вливание, которым данный узел был создан
* created - дата создания узла в системе - индексирован, ex: "2022-07-13T20:03:36.289863300"
* name - имя узла по умолчанию (может быть пустым)
* name_ru - тоже имя на русском (может быть пустым),  ex: "Кирилловка"
* name_uk - тоже имя на украинском (может быть пустым), ex: "Кирилівка",
* name_en - тоже имя на английском (может быть пустым), ex: "Kyrylivka"

### Actor
Действующее лицо, субъект, активный игрок в событиях, 
актор, физлицо, организация, страна, Блок стран, Объединение, Воинское объединение, Воинская часть и тд.

Родитель: [Ent](#Ent) 

Игроки могут быть:
* Person - физлица, люди
* Org - организации (множества людей обладающих субъектностью)
  * StateOrg - государство, народ, нация
  * BizOrg - бизнес-организация, юридическое лицо, фирма
  * WarOrg - военная организация, армии, отряды и пр
  * CrimOrg - криминальные организации, кланы

### Instance
Сущность, объект, предмет реального мира или абстрактное понятие, идея, 
экземпляр: артефакт, танк, ракета, компьютер, город;
предмет виртуального мира: пост в соцсети, СМС, фотография, видеозапись.
Родитель: [Ent](#Ent)

_(TODO - подумать, может дать более точную таксономию: разделить на предметы реального мира, предметы виртуального мира, на идеи)_ 

### Event
Событие, явление, процесс, война, перегруппировка, финансирование, снабжение, 
бой, расстрел, пленение, взрыв, огневое поражение и тд.

Атрибуты:
* start_time - дата, время начала события
* end_time - дата, время конца события

События могут быть _(TODO - подумать надо ли разделять на подтипы событий)_:
* WarEvent - относящиеся к военным действиям (бой, обстрел, прилеты)
* BizEvent - к бизнесу (покупка-продажа активов, договора, поставки)
* StateEvent - государственные события (назначения, отставки, выборы)
* CrimEvent - события криминального мира (разбои, ограбления, наркоторговля и тд)

### Place
Место, локация, населенный пункт.

Родитель: [Ent](#Ent) от которого наследует все атрибуты

Атрибуты
 * geo_id - идентификатор месте в ГЕО базе (если отсутсвует, то место не имеет геокоординат)
 * osm_name_prefix - ex: "село", см [:name:prefix](https://wiki.openstreetmap.org/wiki/Key:name:prefix)
 * osm_place - ex: "village", см [place](https://wiki.openstreetmap.org/wiki/RU:Key:place)
 * osm_admin_level - ex: 9, число, см [admin_level](https://wiki.openstreetmap.org/wiki/Key:admin_level)
 * osm_boundary - ex: "administrative", см [boundary](https://wiki.openstreetmap.org/wiki/Key:boundary)
 * osm_population: ex: 732, число, см [population](https://wiki.openstreetmap.org/wiki/Key:population)
 
### Media
Фотография или видеозапись.

Родитель: [Ent](#Ent) от которого наследует все атрибуты.
Атрибуты:
 * file - идентификатор файла в хранилище 


### Person
Человек.

Атрибут name наследуется от Ent. Для человека - это 

Родитель: [Ent](#Ent) 

Атрибуты:
* first_name
* last_name
* middle_name
* birth
  * date
  * place - место рождения, ссылка на географию
* death
  * date
  * place - ссылка на географию

>TODO: часто атрибуты человека устанавливаются и уточняются постепенно, 
> в разных запросах на вливание, в разных исходных документах, поэтому наверное нужно
> подумать об выделении отдельных вершин под такие атрибуты? 
> С другой стороны это увеличит сложность запросов.
## Связи

### Виды связей
[см тут](http://www.recyclebin.ru/BMK/APIP/l1.pdf)
* Общелогические (Род -> Вид, Целое -> Часть, Класс -> Экземпляр)
* Пространственные (у нас - задаются вне графа, например точкой на карте)
* Временные (Предыдущее -> Последующее)
* Причинно-следственные (Участие, Бенефициар, Пострадавший, Активизация)

### Атрибуты связей

Общие атрибуты для всех связей       
 * uid
 * src
 * created

### CONTAINS
(Субъект) =содержит=> (Объект)

Связь отражает вхождение с владением одного в другое. Субъект как что-то более большое и значимое содержит внутри себя
менее значимый объект.

([Place](#Place)) =CONTAINS=> ([Place](#Place))



